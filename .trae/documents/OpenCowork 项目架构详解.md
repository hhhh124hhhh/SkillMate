# 方案：锁定 Skill 系统以提升稳定性

是的，完全可以关闭 Skills 的写入功能。这将把应用从一个“开发者工具”转变为一个更稳定、更安全的“产品级工具”。

为了实现这一点，我们需要在后端（Electron 主进程）进行拦截，切断所有修改 Skill 的途径。

## 实施步骤

### 1. 修改 Skill 加载源 (核心改动)
目前系统会把 Skill 复制到用户目录 (`.opencowork/skills`) 并从那里加载，这允许用户修改。我们将改为**直接从安装包内的只读目录加载**。

**目标文件**: `electron/agent/skills/SkillManager.ts`

**修改计划**:
1.  修改 `constructor`，将 `skillsDir` 指向 `process.resourcesPath` 下的内置目录，而不是用户主目录。
2.  移除或禁用 `initializeDefaults()` 方法中的复制逻辑（`fs.cp`），不再需要把文件复制到外部。
3.  这样，应用将始终运行开发者打包好的、经过测试的 Skill 版本。

### 2. 禁用修改接口 (API 拦截)
即使前端发送了修改请求，后端也应该拒绝。

**目标文件**: `electron/main.ts`

**修改计划**:
1.  修改 `ipcMain.handle('skills:save', ...)`：直接返回 `{ success: false, error: '技能编辑功能已禁用' }`。
2.  修改 `ipcMain.handle('skills:delete', ...)`：直接返回 `{ success: false, error: '技能删除功能已禁用' }`。
3.  保留 `skills:list` 和 `skills:get`，因为前端展示和 Agent 运行仍然需要读取技能。

### 3. (可选) 前端隐藏入口
为了更好的用户体验，可以在前端隐藏“编辑”和“新建”按钮，但这属于 UI 优化，不是安全必须。

## 预期效果
执行上述修改后：
1.  **稳定性提升**：用户或 AI 无法意外修改核心功能的逻辑，保证每次运行的一致性。
2.  **安全性提升**：杜绝了恶意脚本被注入到 Skill 目录的风险。
3.  **维护性**：更新应用时，直接替换安装包即可更新 Skill，无需处理用户目录下的旧文件冲突。

您确认要执行这些修改吗？如果确认，我将为您实施代码变更。
