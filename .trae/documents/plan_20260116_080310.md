# 添加HTTP MCP传输支持

## 目标
修改项目的MCP客户端实现，添加对HTTP传输的支持，以使用用户提供的百度千帆AI搜索MCP服务。

## 实现步骤

### 1. 检查MCP SDK支持
- 检查 `@modelcontextprotocol/sdk` 是否支持HTTP传输
- 查看SDK文档，了解HTTP传输的配置方式

### 2. 修改MCPServerConfig接口
- 更新 `MCPServerConfig` 接口，添加HTTP传输相关的字段：
  - `type`: 传输类型（stdio或streamableHttp）
  - `baseUrl`: HTTP服务器地址
  - `headers`: HTTP请求头部

### 3. 修改connectToServer方法
- 添加对HTTP传输的支持
- 根据配置类型选择使用 `StdioClientTransport` 或 `HttpTransport`
- 实现HTTP传输的连接逻辑

### 4. 更新MCP配置文件
- 更新 `mcp.json` 文件，使用用户提供的百度千帆AI搜索MCP配置：
  ```json
  {
    "mcpServers": {
      "aisearch-mcp-server": {
        "name": "aisearch-mcp-server",
        "type": "streamableHttp",
        "description": "搜索实时信息，支持使用大模型进行总结回复。",
        "baseUrl": "https://qianfan.baidubce.com/v2/ai_search/mcp",
        "headers": {
          "Authorization": "Bearer xxxxx"
        }
      },
      "context7": {
        "name": "context7",
        "command": "npx",
        "args": ["-y", "@upstash/context7-mcp@latest"],
        "env": {}
      }
    }
  }
  ```

### 5. 测试功能
- 重启应用以加载新的MCP配置
- 检查应用日志，确认HTTP MCP服务是否成功连接
- 尝试分析微信公众号文章链接
- 验证MCP服务是否正常工作

## 技术说明
- **传输类型**：支持两种传输方式：stdio（本地命令行）和streamableHttp（远程HTTP）
- **配置结构**：根据传输类型使用不同的配置字段
- **兼容性**：保持对现有stdio传输的支持，确保context7 MCP服务器仍然正常工作
- **错误处理**：添加适当的错误处理，确保HTTP连接失败时不会影响整个应用的运行