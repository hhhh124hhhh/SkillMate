---
name: 选题搜索工具
description: 基于MCP服务的公众号选题搜索工具，支持热点追踪和智能推荐。当用户需要"找选题"、"热点搜索"、"推荐话题"、"评估选题"、"当天选题"、"今天选题"、"最新选题"、"搜选题"时自动触发。
---

# 选题搜索工具

基于MCP服务的选题搜索工具，为微信公众号运营提供全方位的选题支持。

## 🚀 快速开始

**用户只需说以下任意指令，AI 即可自动获取当天选题：**

✅ **简单直接**：
- "当天选题"
- "今天选题"
- "找选题"
- "搜选题"
- "推荐话题"
- "最新热点"

✅ **具体需求**：
- "帮我找一些AI领域的当天选题"
- "今天有什么热门选题"
- "推荐几个科技类的热点"

**AI 会自动**：
1. ✅ 理解用户需求（找选题）
2. ✅ 自动获取当前真实日期（系统注入，无需手动调用）
3. ✅ 调用 MCP 搜索服务获取实时热点
4. ✅ 返回基于当天日期的选题推荐
5. ✅ 在结果中标注"当前日期：[系统注入的日期]"

**重要**：用户**不需要**手动指定日期，系统会自动注入当天日期！

---

## ⚠️ 执行顺序要求（CRITICAL）

**[MUST] 强制执行顺序**：

**系统自动处理**（无需手动调用）：
- ✅ 系统会**自动注入当前真实日期**到 MCP 搜索的 Prompt 中
- ✅ 注入格式：`【当前日期：YYYY年MM月DD日】`（YYYY=当前年份，MM=当前月份，DD=当前日期）
- ✅ 在调用 `aisearch-mcp-server__chatCompletions` 时自动执行

**[MUST] 你需要做的**：
1. **[MUST] 直接调用** `aisearch-mcp-server__chatCompletions` 进行搜索
2. **[MUST] 在所有输出中标注** "当前日期：[系统注入的日期]"

**[MUST] 禁止事项（CRITICAL）**：
1. **[MUST] ❌ 不要在prompt中包含任何具体日期**（如"2025年1月19日"、"今天"）
2. **[MUST] ❌ 不要生成类似"请搜索今天..."的instruction**
3. **[MUST] ❌ 不要在instruction中列出"1. 2025年1月19日的最新..."**
4. **[MUST] ❌ 不要使用"最新"、"当天"等可能让AI推断日期的词**
5. **[MUST] ✅ 使用客观的时间范围描述**（如"最近24-48小时"、"近期"）

**重要说明**：
- 不需要手动调用 `get_current_time` 工具
- 系统已在代码层面自动注入时间
- 确保 MCP 搜索的 Prompt 能获取到准确的当前日期
- 如果AI在prompt中包含完整日期（如"2025年1月19日"），系统会检测到并跳过注入，导致时间错误

## 核心功能

1. **热点追踪** - 使用MCP服务获取实时热点数据
2. **智能推荐** - 基于账号定位推荐选题，计算匹配度
3. **选题评估** - 多维度评估（时效性、热度、匹配度、合规性、切入点）

## 工作流程

### 流程1：热点追踪（最常用）

**[MUST] 执行顺序**：

```
步骤 [MUST]：搜索热点（系统自动注入时间）
┌─────────────────────────────────────────┐
│ 调用工具：aisearch-mcp-server__chatCompletions │
│                                         │
│ 系统自动注入：                          │
│ 【当前日期：YYYY年MM月DD日】            │
│ （YYYY=当前年份，MM=当前月份，DD=当前日期）│
│                                         │
│ Prompt模板：                            │
│ "请搜索热点话题，                       │
│ 特别关注最近24-48小时内的热点。         │
│                                         │
│ 要求：                                  │
│ 1. 提供话题标题                         │
│ 2. 简要描述（1-2句话）                  │
│ 3. 确保信息时效性（最近24-48小时）       │
│ 4. 以结构化格式返回"                    │
│                                         │
│ ⚠️ 注意：不要包含"今天"、"最新"等可能   │
│ 让AI推断日期的词，系统会自动注入当前日期│
└─────────────────────────────────────────┘
              ↓
步骤 [MUST]：生成选题列表
┌─────────────────────────────────────────┐
│ 基于搜索结果生成结构化选题列表           │
│ 每个选题包含：                           │
│ - 选题标题                              │
│ - 热点描述（1-2句话）                   │
│ - 推荐理由                              │
│ - 当前日期标注（从系统注入的日期获取）   │
└─────────────────────────────────────────┘
```

**示例输出**：
```
📅 当前日期：[系统自动注入的当前日期]

🔥 热点选题推荐

1. [热点标题1]
   描述：[热点描述]
   推荐理由：[推荐理由]

2. [热点标题2]
   描述：[热点描述]
   推荐理由：[推荐理由]
```

### 流程2：智能推荐（次常用）

**[MUST] 执行顺序**：

```
步骤 [MUST]：理解账号定位
┌─────────────────────────────────────────┐
│ 从用户输入或上下文中提取：               │
│ - 账号定位（如"科技"、"职场"）          │
│ - 历史选题（如有）                       │
│ - 目标读者群体                           │
└─────────────────────────────────────────┘
              ↓
步骤 [MUST]：搜索相关热点（系统自动注入时间）
┌─────────────────────────────────────────┐
│ 调用工具：aisearch-mcp-server__chatCompletions │
│                                         │
│ 系统自动注入：                          │
│ 【当前日期：YYYY年MM月DD日】            │
│ （YYYY=当前年份，MM=当前月份，DD=当前日期）│
│                                         │
│ Prompt模板：                            │
│ "请搜索关于 [账号定位] 的热点话题，     │
│ 特别关注：                              │
│ 1. [账号定位] 领域的重要动态            │
│ 2. [账号定位] 行业趋势                  │
│ 3. [账号定位] 相关的社会热点             │
│                                         │
│ 要求：                                  │
│ - 提供话题标题和简述                     │
│ - 确保时效性（最近24-48小时）            │
│ - 与 [账号定位] 高度相关"                │
│                                         │
│ ⚠️ 注意：不要包含"今天"、"最新"等词，  │
│ 系统会自动注入当前日期，避免时间错误    │
└─────────────────────────────────────────┘
              ↓
步骤 [MUST]：计算匹配度并排序
┌─────────────────────────────────────────┐
│ 基于搜索结果和账号定位：                 │
│ 1. 计算每个话题的匹配度（0-100%）        │
│ 2. 按匹配度从高到低排序                 │
│ 3. 生成推荐理由                         │
│ 4. 标注当前日期（从系统注入的日期获取）  │
└─────────────────────────────────────────┘
```

**示例输出**：
```
📅 当前日期：[系统自动注入的当前日期]
🎯 账号定位：科技类

智能推荐选题（按匹配度排序）

1. [热点标题1] [匹配度：XX%]
   描述：[热点描述]
   推荐理由：[与科技定位相关的推荐理由]

2. [热点标题2] [匹配度：XX%]
   描述：[热点描述]
   推荐理由：[与科技定位相关的推荐理由]

3. [热点标题3] [匹配度：XX%]
   描述：[热点描述]
   推荐理由：[与科技定位相关的推荐理由]
```

### 流程3：选题评估

**[MUST] 执行顺序**：

```
步骤 [MUST]：分析选题（基于系统注入的日期）
步骤 [MUST]：计算综合评分（5个维度）
步骤 [MUST]：提供改进建议
```

**注意**：当前日期已由系统自动注入到 MCP 搜索中，评估时直接使用即可。

**评估维度**：

| 维度 | 权重 | 说明 |
|------|------|------|
| 时效性 | 30% | 话题的时效性和新鲜度 |
| 热度 | 25% | 话题的热度和传播度 |
| 匹配度 | 25% | 与账号定位的匹配程度 |
| 合规性 | 10% | 内容的合规性和安全性 |
| 切入点 | 10% | 与其他创作者的差异化 |

**评分等级**：
- 80-100：优秀（强烈推荐）
- 60-79：良好（推荐执行）
- 40-59：一般（需优化切入点）
- 0-39：较差（不推荐）

## MCP 工具调用详解

### 系统自动注入时间（无需手动操作）

**自动注入机制**：
- 当调用 `aisearch-mcp-server__chatCompletions` 时
- 系统自动在 Prompt 前注入：`【当前日期：YYYY年MM月DD日】`
- 确保搜索基于准确的当前日期（YYYY=当前年份，MM=当前月份，DD=当前日期）

**日志输出**：
```
[MCPClientService] ✅ Auto-injected current date: YYYY年MM月DD日
```

### 调用 MCP 搜索工具

**工具名称**：`aisearch-mcp-server__chatCompletions`（MCP 工具）

**推荐 Prompt 模板**：

#### 通用热点搜索
```
请搜索热点话题，特别关注：
1. 科技/AI 领域的重要动态
2. 社会热点和民生话题
3. 行业趋势和政策变化
4. 娱乐和文化热点

要求：
- 提供话题标题
- 简要描述（1-2句话）
- 确保信息时效性（最近24-48小时内）
- 以结构化格式返回，方便分析

⚠️ 重要：不要包含"今天"、"最新"、"当天"等可能让AI推断日期的词
⚠️ 重要：使用客观表达（如"重要动态"、"近期热点"）
```

#### 特定领域搜索
```
请搜索关于 [领域] 的热点话题，
特别关注近期重要事件和发展。

要求：
- 提供 10-15 个相关话题
- 每个话题包含标题和简述
- 确保时效性和相关性（最近24-48小时）
- 以结构化格式返回

⚠️ 重要：避免使用"今天"、"最新"等需要推断日期的表达
```

**调用方式**：
```json
{
  "tool_call": {
    "name": "aisearch-mcp-server__chatCompletions",
    "arguments": {
      "prompt": "请搜索最新热点话题..."
    }
  }
}
```

**[MUST] 注意事项**：
- ✅ 系统会自动注入当前日期，无需手动添加
- ✅ 明确要求时效性（24-48小时）
- ✅ 要求结构化输出格式
- ❌ **禁止**在prompt中包含"今天"、"最新"、"当天"等词
- ❌ **禁止**在prompt中包含具体日期（如"2025年1月19日"）
- ✅ 使用客观时间范围（如"最近24-48小时"、"近期"）

## MCP 服务失败处理（CRITICAL）

### 检测失败条件

**[MUST] 检测以下失败情况**：
1. **超时**：MCP 调用超过 10 秒
2. **错误响应**：返回错误信息
3. **空结果**：返回空数据或无效数据

### 三级降级机制

#### Level 1：自动重试

**[MUST] 重试策略**：
```
if (MCP 调用失败) {
    等待 2 秒
    重试 MCP 调用
    if (仍然失败) {
        等待 2 秒
        最后一次重试
    }
}
```

#### Level 2：降级到 AI 知识

**[MUST] 如果重试 2 次后仍失败，立即降级**：

```
"抱歉，搜索服务暂时不可用。

⚠️ 基于我的知识，我推荐以下选题：

1. [选题标题1]
   描述：...
   注意：此选题基于通用知识，可能不是最新热点

2. [选题标题2]
   描述：...
   注意：此选题基于通用知识，可能不是最新热点

💡 建议：
1. 检查网络连接是否正常
2. 稍后重试（5-10分钟后）
3. 手动搜索热点后告诉我，我帮你分析和评估"
```

**[MUST] 降级时必须**：
- 明确说明"基于通用知识"
- 标注"数据可能不是最新"
- 提供可操作的建议

#### Level 3：友好错误提示

**[MUST] 如果连降级也无法提供，显示友好错误**：

```
❌ 搜索服务暂时不可用

📅 当前日期：[系统自动注入的当前日期]

可能的原因：
1. 网络连接不稳定
2. MCP 服务维护中
3. 服务器负载过高

建议操作：
1. 检查网络连接
2. 稍后重试（建议 5-10 分钟后）
3. 或手动告诉我热点话题，我帮你评估

💡 小技巧：你可以直接从微博、知乎、百度等平台
   复制热点话题给我，我会帮你分析和推荐！
```

### 错误处理示例代码逻辑

```
try {
    // 步骤：搜索热点（系统自动注入时间，带重试）
    retry_count = 0
    max_retry = 2

    while (retry_count < max_retry) {
        try {
            hot_topics = mcp_search()  // 系统自动注入日期
            break  // 成功，跳出重试
        } catch (error) {
            retry_count++
            if (retry_count < max_retry) {
                wait(2 seconds)  // 等待后重试
            }
        }
    }

    // 步骤：判断结果
    if (hot_topics is empty or error) {
        // 降级到 AI 知识
        return generate_fallback_topics()
    } else {
        // 正常处理
        return process_topics(hot_topics)
    }

} catch (fatal_error) {
    // 友好错误提示
    return show_friendly_error()
}
```

## 选题推荐策略

### 热点选题（强烈推荐）

**时效性优先**：
- ✅ 优先选择 24 小时内的热点（点击率提升 50%）
- ✅ 关注热点发展趋势
- ✅ 预判热点持续时间

**差异化切入**：
- ✅ 寻找独特角度，避免同质化
- ✅ 提供不同视角
- ✅ 结合个人经历

**风险控制**：
- ✅ 避免敏感话题
- ✅ 标题与内容匹配
- ✅ 遵守平台规范

### 常规选题（灵活应用）

**根据账号类型灵活选择**：

**教程类账号**：
- ✅ 工具使用技巧
- ✅ 方法论总结
- ✅ 常见问题解答

**资讯类账号**：
- ✅ 行业动态
- ✅ 数据报告
- ✅ 趋势分析

**观点类账号**：
- ✅ 热点评论
- ✅ 行业观点
- ✅ 认知升级

**核心原则**：选题与账号定位匹配，内容与读者需求对应。

## 设计权衡说明

### 为什么时效性占 30% 最高权重？

**答案**：时效性是热点选题的生命线

**数据支撑**：
- 24 小时内热点：点击率 15-20%
- 24-48 小时：点击率 8-12%
- 48 小时后：点击率 3-5%

**权衡分析**：
- **热点窗口期**：24-48 小时是黄金期
- **信息过载**：用户每天接触大量信息，只有最新热点能吸引注意
- **传播速度**：社交媒体传播速度极快，错过窗口期效果大打折扣

### 为什么匹配度占 25% 第二权重？

**答案**：匹配度决定长期粉丝留存

**数据支撑**：
- 高匹配度选题：平均阅读率 15-20%
- 低匹配度选题：平均阅读率 5-8%
- 差距：2-3 倍

### 为什么切入点和合规性各占 10%？

**答案**：风险控制和差异化的平衡

**切入点（10%）**：
- **同质化风险**：过度热点竞争导致点击率下降
- **差异化价值**：独特角度提升辨识度
- **不强制要求**：新账号可以从通用角度切入

**合规性（10%）**：
- **一票否决**：敏感话题直接放弃
- **风险控制**：低权重但高优先级
- **安全第一**：宁可错过热点，不要冒封号风险

## 最佳实践

### 选题搜索流程

✅ **DO（推荐做法）**：
1. 直接调用 MCP 搜索（系统会自动注入当前日期）
2. 使用结构化的 Prompt 模板
3. 要求 24-48 小时内的热点
4. 基于账号定位筛选话题
5. 提供推荐理由和匹配度

❌ **DON'T（避免做法）**：
1. ❌ 手动调用 get_current_time（系统已自动处理）
2. ❌ 使用过于宽泛的搜索词
3. ❌ 忽略时效性要求
4. ❌ 不考虑账号定位
5. ❌ MCP 失败时不提供降级方案

### MCP 服务使用

**请求频率**：
- 避免频繁请求，防止被限流
- 同一查询间隔至少 30 秒
- 使用缓存机制（短期）

**错误处理**：
- 正确处理 MCP 服务异常
- 实现三级降级机制
- 提供友好的错误提示

**数据质量**：
- 验证 MCP 返回数据的准确性
- 检查时间戳和来源
- AI 二次筛选和验证

## 开始使用

直接说"找选题"或"推荐话题"，系统会自动：
1. ✅ 在 MCP 搜索时自动注入当前真实日期
2. ✅ 搜索热点话题
3. ✅ 生成结构化选题推荐
4. ✅ 在所有输出中标注当前日期

**示例对话**：

```
用户：帮我找一些选题

AI：
📅 当前日期：[系统自动注入的当前日期]

🔥 热点选题推荐

1. [热点标题1]
   描述：[热点描述]...
   推荐理由：[推荐理由]...

2. [热点标题2]
   描述：[热点描述]...
   推荐理由：[推荐理由]...

[继续输出更多选题...]
```

## 注意事项

### 选题风险
1. **合规风险**：避免敏感话题和政治话题
2. **同质化**：避免与其他创作者选题重复
3. **时效性**：注意热点时效性，避免过时内容
4. **匹配度**：确保选题与账号定位匹配

### 服务稳定性
1. **网络依赖**：MCP 服务需要网络连接
2. **超时处理**：设置合理的超时时间（10 秒）
3. **重试机制**：自动重试 2 次，间隔 2 秒
4. **降级方案**：失败时使用 AI 通用知识

### 用户体验
1. **响应速度**：优化 Prompt，减少等待时间
2. **清晰输出**：结构化格式，易于阅读
3. **友好提示**：错误时提供可操作的建议
4. **准确标注**：所有输出包含当前日期

---

**版本**：2.1
**最后更新**：2026-01-16
**优化重点**：
- ✅ 代码层面自动注入当前日期到 MCP 搜索
- ✅ 无需 AI 手动调用 get_current_time
- ✅ 确保时间准确性，防止时间幻觉
- ✅ 简化工作流程，提升执行效率
